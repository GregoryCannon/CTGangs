(this.webpackJsonpctgangs=this.webpackJsonpctgangs||[]).push([[0],[,,,,,,,,function(e,a,t){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,a=0,t=arguments.length;a<t;a++)e+=arguments[a].length;var n=Array(e),l=0;for(a=0;a<t;a++)for(var r=arguments[a],s=0,i=r.length;s<i;s++,l++)n[l]=r[s];return n};a.__esModule=!0,a.getPairings=void 0;var l=t(17),r={id:-1,name:"dummy player",rating:-1,gangName:""};function s(e,a){return Math.abs(e.rating-a.rating)<=200}function i(e,a){a.benchedPlayers.push({playerData:e,legalSubstitutions:[]})}function c(e,a){for(var t=0,n=a.pairs;t<n.length;t++){var l=n[t];if(l.aPlayer.id===e.id)return l.bPlayer;if(l.bPlayer.id===e.id)return l.aPlayer}console.log("No opponent found for",e.name,"id:",e.id)}a.getPairings=function(e,a){for(;e.length<a.length;)e.push(r);for(;a.length<e.length;)a.push(r);for(var t=function(e,a){return e.map((function(e){return a.map((function(a){return s(e,a)?Math.abs(a.rating-e.rating):1e4}))}))}(e,a),u=l(t),o={pairs:[],benchedPlayers:[]},h=0,m=u;h<m.length;h++){var d=m[h],g=e[d[0]],p=a[d[1]];g==r?i(p,o):p==r?i(g,o):s(g,p)?o.pairs.push({aPlayer:g,bPlayer:p}):(i(g,o),i(p,o))}for(var f=function(t){for(var l=0,r=n(e,a).filter((function(e){return e.gangName===t.playerData.gangName}));l<r.length;l++){var i=r[l],u=c(i,o);t.playerData.gangName==i.gangName&&void 0!==u&&s(t.playerData,u)&&t.legalSubstitutions.push(i)}},b=0,y=o.benchedPlayers;b<y.length;b++){f(y[b])}return o}},,function(e,a,t){e.exports=t(20)},,,,,function(e,a,t){},function(e,a,t){},,function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(7),s=t.n(r),i=(t(15),t(2)),c=t(3),u=t(1),o=t(5),h=t(4),m=(t(16),t(8));t(18);function d(e){return console.log("ResultDisplay props",e),l.a.createElement("div",{className:"result-container"},l.a.createElement("h2",{id:"result-title"},"Results"),l.a.createElement("h3",{className:"result-section-title"},"Matches"),e.result.pairs.length>0?l.a.createElement("table",{id:"matches-table"},l.a.createElement("tbody",null,e.result.pairs.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.aPlayer.name+" vs. "+e.bPlayer.name))})))):l.a.createElement("em",null,"No matches possible!"),e.result.benchedPlayers.length>0?l.a.createElement("div",null,l.a.createElement("h3",{className:"result-section-title"},"Benched Players"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Player"),l.a.createElement("th",null,"Gang"),l.a.createElement("th",null,"Could Sub For"))),l.a.createElement("tbody",null,e.result.benchedPlayers.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.playerData.name),l.a.createElement("td",null,e.playerData.gangName),l.a.createElement("td",null,e.legalSubstitutions.length>0?e.legalSubstitutions.map((function(e){return l.a.createElement("div",null,e.name)})):l.a.createElement("em",null,"None possible")))}))))):l.a.createElement("div",null))}var g=t(9),p=(t(19),function(e){Object(o.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).state={playerDataList:[],challengingGangPlayersText:"",defendingGangPlayersText:"",statusText:""},n.handleSpreadsheetDataChange=n.handleSpreadsheetDataChange.bind(Object(u.a)(n)),n.handleDefendingGangPlayersChanged=n.handleDefendingGangPlayersChanged.bind(Object(u.a)(n)),n.handleChallengingGangPlayersChanged=n.handleChallengingGangPlayersChanged.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(c.a)(t,[{key:"handleSpreadsheetDataChange",value:function(e){var a=e.target.value.split("\n").map((function(e){var a=e.split("\t");return{id:parseInt(a[0]),name:a[1],gangName:a[2],rating:parseInt(a[7])}}));console.log("Player data:",a),this.setState({playerDataList:a})}},{key:"handleChallengingGangPlayersChanged",value:function(e){this.setState({challengingGangPlayersText:e.target.value})}},{key:"handleDefendingGangPlayersChanged",value:function(e){this.setState({defendingGangPlayersText:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var a=this.parsePlayerData(this.state.challengingGangPlayersText),t=this.parsePlayerData(this.state.defendingGangPlayersText);this.props.submitFunction(a,t)}},{key:"parsePlayerData",value:function(e){var a,t=this,n=e.split(/\n|,/).filter((function(e){return e.length>0})),l=[],r=[],s=Object(g.a)(n);try{var i=function(){var e=a.value,n=t.state.playerDataList.filter((function(a){return a.name.trim().toUpperCase()===e.trim().toUpperCase()}));1===n.length?l.push(n[0]):r.push(e)};for(s.s();!(a=s.n()).done;)i()}catch(c){s.e(c)}finally{s.f()}return r.length>0&&this.setState({statusText:"Unable to find spreadsheet data for: "+r.join(", ")}),l}},{key:"render",value:function(){return l.a.createElement("div",{className:"form-container"},l.a.createElement("p",{id:"status-text"},this.state.statusText),l.a.createElement("form",{id:"main-form",onSubmit:this.handleSubmit},l.a.createElement("div",{className:"main-label"},"Spreadsheet Player Data"),l.a.createElement("div",{className:"secondary-label"},"Make a box selecting all relevant players in the spreadsheet, and then copy paste it here"),l.a.createElement("textarea",{id:"sheets-data-textarea",onChange:this.handleSpreadsheetDataChange}),l.a.createElement("div",{className:"main-label"},"Participants from Challenging Gang"),l.a.createElement("div",{className:"secondary-label"},"Put newlines or commas between names"),l.a.createElement("textarea",{className:"participant-list-textarea",onChange:this.handleChallengingGangPlayersChanged}),l.a.createElement("div",{className:"main-label"},"Participants from Challenging Gang"),l.a.createElement("div",{className:"secondary-label"},"Put newlines or commas between names"),l.a.createElement("textarea",{className:"participant-list-textarea",onChange:this.handleDefendingGangPlayersChanged}),l.a.createElement("input",{id:"submit-button",type:"submit",value:"Get Matches!"})))}}]),t}(n.Component)),f={pairs:[],benchedPlayers:[]},b=function(e){Object(o.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).state={result:f},n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(c.a)(t,[{key:"handleSubmit",value:function(e,a){var t=Object(m.getPairings)(e,a);this.setState({result:t})}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("p",null,"Welcome to Classic Tetris Gangs!")),l.a.createElement("div",{id:"page-body"},l.a.createElement(p,{submitFunction:this.handleSubmit}),this.state.result==f?l.a.createElement("div",null):l.a.createElement("div",null,l.a.createElement(d,{result:this.state.result}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.b3b0081e.chunk.js.map