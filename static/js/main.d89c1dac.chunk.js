(this.webpackJsonpctgangs=this.webpackJsonpctgangs||[]).push([[0],[,,,,,,,,function(e,a,n){"use strict";var t=this&&this.__spreadArrays||function(){for(var e=0,a=0,n=arguments.length;a<n;a++)e+=arguments[a].length;var t=Array(e),r=0;for(a=0;a<n;a++)for(var l=arguments[a],i=0,s=l.length;i<s;i++,r++)t[r]=l[i];return t};a.__esModule=!0,a.getPairings=void 0;var r=n(17),l=n(18);function i(e){for(var a=[],n=0,t=e.neighbors;n<t.length;n++){var r=t[n];1===r.neighbors.length&&a.push(r)}return a}function s(e,a){for(var n=[],r=[],s=0,o=e;s<o.length;s++){var c=o[s];n.push({id:c.id,name:c.name,rating:c.rating,gang:"A",neighbors:[],lonelyNeighbors:[]})}for(var g=0,u=a;g<u.length;g++){c=u[g];r.push({id:c.id,name:c.name,rating:c.rating,gang:"B",neighbors:[],lonelyNeighbors:[]})}for(var h=0,m=n;h<m.length;h++)for(var d=m[h],p=0,b=r;p<b.length;p++){var f=b[p];Math.abs(d.rating-f.rating)<=l.ALLOWED_RATING_DIFFERENCE&&(d.neighbors.push(f),f.neighbors.push(d))}for(var v=0,y=n;v<y.length;v++){(N=y[v]).lonelyNeighbors=i(N)}for(var E=0,P=r;E<P.length;E++){var N;(N=P[E]).lonelyNeighbors=i(N)}return t(n,r)}function o(e,a){var n=e.indexOf(a);n>-1&&e.splice(n,1)}function c(e,a){for(var n=0,t=e.neighbors;n<t.length;n++){o(t[n].neighbors,e)}o(a,e)}function g(e,a,n,t){console.log("Pairing",e.name,"with",a.name),t.pairs.push({aPlayerName:"A"===e.gang?e.name:a.name,bPlayerName:"A"===e.gang?a.name:e.name}),c(e,n),c(a,n)}function u(e,a){for(var n=e.length-1;n>=0;n--){var t=e[n];0===t.neighbors.length&&(console.log("Removing stranded player",t.name),c(t,e),a.benchedPlayers.push({name:t.name,gang:t.gang,legalSubstitutions:[]}))}}function h(e,a){for(var n=e.filter((function(e){return 1===e.lonelyNeighbors.length})),t=n.length>0;n.length>0;){var r=n[0],l=r.lonelyNeighbors[0];g(r,l,e,a),c(r,n),c(l,n)}return t}function m(e,a){for(var n=-1,t=a[0],r=0,l=a;r<l.length;r++){var i=l[r],s=Math.abs(i.rating-e.rating);(-1===n||s<n)&&(n=s,t=i)}return t}function d(e,a){for(var n=e.filter((function(e){return e.lonelyNeighbors.length>1})),t=n.length>0;n.length>0;){var r=n[0],l=m(r,r.lonelyNeighbors);g(r,l,e,a),c(r,n),c(l,n)}return t}function p(e,a){if(0!==e.length){for(var n=-9999999,t=e[0],r=0,l=e;r<l.length;r++){var i=l[r];i.rating>n&&(n=i.rating)}var s=e.filter((function(e){return e.gang!==t.gang})),o=m(t,s);g(t,o,e,a)}}a.getPairings=function(e,a){var n=s(e,a);r.printGraph(n),console.log("\nStarting pairings");var t=s(e,a),l={pairs:[],benchedPlayers:[]};r.printGraphMini(t);for(var i=-1;-1===i||t.length<i;)i=t.length,u(t,l),h(t,l)||d(t,l)||p(t,l);return function(e,a){for(var n=function(n){for(var t=function(a){var t=e.pairs.filter((function(e){return e.aPlayerName===a.name||e.bPlayerName===a.name}))[0],r="A"===n.gang?t.aPlayerName:t.bPlayerName;console.log("Found legal substitution:",n.name,"for",r),n.legalSubstitutions.push(r)},r=0,l=a.filter((function(e){return e.name===n.name}))[0].neighbors;r<l.length;r++){t(l[r])}},t=0,r=e.benchedPlayers;t<r.length;t++){n(r[t])}}(l,n),r.printGraph(t),l}},,function(e,a,n){e.exports=n(21)},,,,,function(e,a,n){},function(e,a,n){},function(e,a,n){"use strict";a.__esModule=!0,a.convertPbList=a.printGraphMini=a.printGraph=void 0,a.printGraph=function(e){console.log("\n\nGraph: [");for(var a=0,n=e;a<n.length;a++){var t=n[a];console.log("{"),console.log("\tName: ",t.name,"\n\tRating:",t.rating,"\n\tNeighbors:",t.neighbors.map((function(e){return e.name})),"\n\tLonely neighbors:",t.lonelyNeighbors.map((function(e){return e.name}))),console.log("}")}console.log("]")},a.printGraphMini=function(e){console.log("Graph:",e.map((function(e){return e.name})))},a.convertPbList=function(e){return e.map((function(e){return{id:e.id,name:e.name,rating:.85*e.pb+400}}))}},function(e,a,n){"use strict";a.__esModule=!0,a.CtlBList=a.CtlAList=a.testListB=a.testListA=a.ALLOWED_RATING_DIFFERENCE=void 0,a.ALLOWED_RATING_DIFFERENCE=200,a.testListA=[{id:1,name:"GregBoomCannon",rating:1220},{id:2,name:"Kofi",rating:1380},{id:3,name:"dog",rating:1540},{id:4,name:"Boone",rating:600},{id:5,name:"Arower",rating:20},{id:6,name:"Crower",rating:100}],a.testListB=[{id:7,name:"JD",rating:1580},{id:8,name:"Jake",rating:1560},{id:9,name:"gizmo",rating:960},{id:10,name:"Samantha",rating:700},{id:11,name:"Brower",rating:40}],a.CtlAList=[{id:11,name:"Mattholland",pb:580},{id:12,name:"Iceblade",pb:510},{id:13,name:"Greg",pb:960},{id:14,name:"Zipley",pb:1040},{id:15,name:"Scamper",pb:997},{id:16,name:"Opaux",pb:1080},{id:17,name:"Andy",pb:1200},{id:18,name:"Jeff",pb:1245}],a.CtlBList=[{id:20,name:"Eggmaster",pb:1120},{id:21,name:"Vernie",pb:460},{id:22,name:"Xerxos",pb:650},{id:23,name:"Torza",pb:880},{id:24,name:"Johann",pb:823},{id:25,name:"Kim",pb:840},{id:26,name:"Jerpidude",pb:1240},{id:27,name:"Sharky",pb:1060},{id:28,name:"TheMisterValor",pb:1e3}]},function(e,a,n){},function(e,a,n){},function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),l=n(7),i=n.n(l),s=(n(15),n(2)),o=n(3),c=n(1),g=n(5),u=n(4),h=(n(16),n(8));n(19);function m(e){return r.a.createElement("div",{className:"result-container"},r.a.createElement("h2",{id:"result-title"},"Results"),r.a.createElement("h3",{className:"result-section-title"},"Matches"),e.result.pairs.length>0?r.a.createElement("table",{id:"matches-table"},r.a.createElement("tbody",null,e.result.pairs.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.aPlayerName+" vs. "+e.bPlayerName))})))):r.a.createElement("em",null,"No matches possible!"),e.result.benchedPlayers.length>0?r.a.createElement("div",null,r.a.createElement("h3",{className:"result-section-title"},"Benched Players"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Player"),r.a.createElement("th",null,"Could Sub For"))),r.a.createElement("tbody",null,e.result.benchedPlayers.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.legalSubstitutions.length>0?e.legalSubstitutions.map((function(e){return r.a.createElement("div",null,e)})):r.a.createElement("em",null,"None possible")))}))))):r.a.createElement("div",null))}var d=n(9),p=(n(20),function(e){Object(g.a)(n,e);var a=Object(u.a)(n);function n(e){var t;return Object(s.a)(this,n),(t=a.call(this,e)).state={playerDataList:[],challengingGangPlayersText:"",defendingGangPlayersText:"",statusText:""},t.handleSpreadsheetDataChange=t.handleSpreadsheetDataChange.bind(Object(c.a)(t)),t.handleDefendingGangPlayersChanged=t.handleDefendingGangPlayersChanged.bind(Object(c.a)(t)),t.handleChallengingGangPlayersChanged=t.handleChallengingGangPlayersChanged.bind(Object(c.a)(t)),t.handleSubmit=t.handleSubmit.bind(Object(c.a)(t)),t}return Object(o.a)(n,[{key:"handleSpreadsheetDataChange",value:function(e){var a=e.target.value.split("\n").map((function(e){var a=e.split("\t");return{id:parseInt(a[0]),name:a[1],rating:parseInt(a[7])}}));console.log(a),this.setState({playerDataList:a})}},{key:"handleChallengingGangPlayersChanged",value:function(e){this.setState({challengingGangPlayersText:e.target.value})}},{key:"handleDefendingGangPlayersChanged",value:function(e){this.setState({defendingGangPlayersText:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var a=this.parsePlayerData(this.state.challengingGangPlayersText),n=this.parsePlayerData(this.state.defendingGangPlayersText);this.props.submitFunction(a,n)}},{key:"parsePlayerData",value:function(e){var a=this,n=e.split("\n").filter((function(e){return e.length>0}));console.log("Defending players raw",n);var t,r=[],l=[],i=Object(d.a)(n);try{var s=function(){var e=t.value,n=a.state.playerDataList.filter((function(a){return a.name.toUpperCase()===e.toUpperCase()}));1===n.length?r.push(n[0]):l.push(e)};for(i.s();!(t=i.n()).done;)s()}catch(o){i.e(o)}finally{i.f()}return l.length>0&&this.setState({statusText:"Unable to find spreadsheet data for: "+l.join(", ")}),r}},{key:"render",value:function(){return r.a.createElement("div",{className:"form-container"},r.a.createElement("p",{id:"status-text"},this.state.statusText),r.a.createElement("form",{id:"main-form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"main-label"},"Spreadsheet Player Data"),r.a.createElement("div",{className:"secondary-label"},"Make a box selecting all relevant players in the spreadsheet, and then copy paste it here"),r.a.createElement("textarea",{id:"sheets-data-textarea",onChange:this.handleSpreadsheetDataChange}),r.a.createElement("div",{className:"main-label"},"Participants from Challenging Gang"),r.a.createElement("div",{className:"secondary-label"},"One per line, no commas"),r.a.createElement("textarea",{className:"participant-list-textarea",onChange:this.handleChallengingGangPlayersChanged}),r.a.createElement("div",{className:"main-label"},"Participants from Challenging Gang"),r.a.createElement("div",{className:"secondary-label"},"One per line, no commas"),r.a.createElement("textarea",{className:"participant-list-textarea",onChange:this.handleDefendingGangPlayersChanged}),r.a.createElement("input",{id:"submit-button",type:"submit",value:"Get Matches!"})))}}]),n}(t.Component)),b={pairs:[],benchedPlayers:[]},f=function(e){Object(g.a)(n,e);var a=Object(u.a)(n);function n(e){var t;return Object(s.a)(this,n),(t=a.call(this,e)).state={result:b},t.handleSubmit=t.handleSubmit.bind(Object(c.a)(t)),t}return Object(o.a)(n,[{key:"handleSubmit",value:function(e,a){this.setState({result:Object(h.getPairings)(e,a)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("p",null,"Welcome to Classic Tetris Gangs!")),r.a.createElement("div",{id:"page-body"},r.a.createElement(p,{submitFunction:this.handleSubmit}),this.state.result==b?r.a.createElement("div",null):r.a.createElement(m,{result:this.state.result})))}}]),n}(t.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.d89c1dac.chunk.js.map