(this.webpackJsonpctgangs=this.webpackJsonpctgangs||[]).push([[0],[,,,,,,,,function(e,t,a){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<a;t++)for(var l=arguments[t],i=0,s=l.length;i<s;i++,r++)n[r]=l[i];return n};t.__esModule=!0,t.getPairings=void 0;var r=a(18),l={id:-1,name:"dummy player",rating:-1,gangName:""};function i(e,t){return Math.abs(e.rating-t.rating)<=200}function s(e,t){t.benchedPlayers.push({playerData:e,legalSubstitutions:[]})}function c(e,t){for(var a=0,n=t.pairs;a<n.length;a++){var r=n[a];if(r.aPlayer.id===e.id)return r.bPlayer;if(r.bPlayer.id===e.id)return r.aPlayer}console.log("No opponent found for",e.name,"id:",e.id)}t.getPairings=function(e,t){for(;e.length<t.length;)e.push(l);for(;t.length<e.length;)t.push(l);for(var a=function(e,t){return e.map((function(e){return t.map((function(t){return i(e,t)?Math.abs(t.rating-e.rating):1e4}))}))}(e,t),u=r(a),o={pairs:[],benchedPlayers:[]},g=0,d=u;g<d.length;g++){var h=d[g],m=e[h[0]],f=t[h[1]];m==l?s(f,o):f==l?s(m,o):i(m,f)?o.pairs.push({aPlayer:m,bPlayer:f}):(s(m,o),s(f,o))}for(var p=function(a){for(var r=0,l=n(e,t).filter((function(e){return e.gangName===a.playerData.gangName}));r<l.length;r++){var s=l[r],u=c(s,o);a.playerData.gangName==s.gangName&&void 0!==u&&i(a.playerData,u)&&a.legalSubstitutions.push(s)}},b=0,y=o.benchedPlayers;b<y.length;b++){p(y[b])}return o}},function(e,t,a){"use strict";t.__esModule=!0,t.fetchSpreadsheetData=void 0;var n=a(21);t.fetchSpreadsheetData=function(e){n("https://docs.google.com/spreadsheets/u/0/d/1lSTbhpqodhqQn7Dg5cN-lcBavdOuimGOKFMg9tVhIMA/gviz/tq?tqx=out:html&tq&gid=1513281692").then((function(e){return e.text()})).then((function(t){e(function(e){var t=e,a=(t=(t=(t=(t=(t=(t=(t=t.replace(/\r?\n|\r/g,"")).replace(/<tr style="background-color: #f0f0f0">/g,"<tr>")).replace(/<tr style="background-color: #ffffff">/g,"<tr>")).replace(/<td align="right">/g,"<td>")).replace(/<\/tr>/g,"")).split("@ Join</td>")[1]).split("</table></body>")[0]).split("<tr>").filter((function(e){return e.length>0})).map((function(e){return e.split(/<td>|<\/td><td>|<\/td>/).slice(1)}));return a=a.filter((function(e){return"&nbsp;"!==e[1]}))}(t).map((function(e){return{id:e[0],name:e[1],gangName:e[2],rating:e[7]}})))}))}},,function(e,t,a){e.exports=a(22)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),i=a.n(l),s=(a(16),a(2)),c=a(3),u=a(1),o=a(5),g=a(4),d=(a(17),a(8));a(19);function h(e){return console.log("ResultDisplay props",e),r.a.createElement("div",{className:"result-container"},r.a.createElement("h2",{id:"result-title"},"Results"),r.a.createElement("h3",{className:"result-section-title"},"Matches"),e.result.pairs.length>0?r.a.createElement("table",{id:"matches-table"},r.a.createElement("tbody",null,e.result.pairs.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.aPlayer.name+" vs. "+e.bPlayer.name))})))):r.a.createElement("em",null,"No matches possible!"),e.result.benchedPlayers.length>0?r.a.createElement("div",null,r.a.createElement("h3",{className:"result-section-title"},"Benched Players"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Player"),r.a.createElement("th",null,"Gang"),r.a.createElement("th",null,"Could Sub For"))),r.a.createElement("tbody",null,e.result.benchedPlayers.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.playerData.name),r.a.createElement("td",null,e.playerData.gangName),r.a.createElement("td",null,e.legalSubstitutions.length>0?e.legalSubstitutions.map((function(e){return r.a.createElement("div",null,e.name)})):r.a.createElement("em",null,"None possible")))}))))):r.a.createElement("div",null))}var m=a(10),f=(a(20),a(9)),p=function(e){Object(o.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={challengingGangPlayersText:"",defendingGangPlayersText:"",statusText:""},n.handleDefendingGangPlayersChanged=n.handleDefendingGangPlayersChanged.bind(Object(u.a)(n)),n.handleChallengingGangPlayersChanged=n.handleChallengingGangPlayersChanged.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"handleChallengingGangPlayersChanged",value:function(e){this.setState({challengingGangPlayersText:e.target.value})}},{key:"handleDefendingGangPlayersChanged",value:function(e){this.setState({defendingGangPlayersText:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),Object(f.fetchSpreadsheetData)((function(e){console.log("\n\n Spreadsheet player data:",e);var a=t.filterPlayerData(t.state.challengingGangPlayersText,e),n=t.filterPlayerData(t.state.defendingGangPlayersText,e);t.props.submitFunction(a,n)}))}},{key:"filterPlayerData",value:function(e,t){var a,n=e.split(/\n|,/).filter((function(e){return e.length>0})),r=[],l=[],i=Object(m.a)(n);try{var s=function(){var e=a.value,n=t.filter((function(t){return t.name.trim().toUpperCase()===e.trim().toUpperCase()}));1===n.length?r.push(n[0]):l.push(e)};for(i.s();!(a=i.n()).done;)s()}catch(c){i.e(c)}finally{i.f()}return l.length>0&&this.setState({statusText:"Unable to find spreadsheet data for: "+l.join(", ")}),r}},{key:"render",value:function(){return r.a.createElement("div",{className:"form-container"},r.a.createElement("p",{id:"status-text"},this.state.statusText),r.a.createElement("form",{id:"main-form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"main-label"},"Participants from Challenging Gang"),r.a.createElement("div",{className:"secondary-label"},"Put newlines or commas between names"),r.a.createElement("textarea",{className:"participant-list-textarea",onChange:this.handleChallengingGangPlayersChanged}),r.a.createElement("div",{className:"main-label"},"Participants from Defending Gang"),r.a.createElement("div",{className:"secondary-label"},"Put newlines or commas between names"),r.a.createElement("textarea",{className:"participant-list-textarea",onChange:this.handleDefendingGangPlayersChanged}),r.a.createElement("input",{id:"submit-button",type:"submit",value:"Get Matches!"})))}}]),a}(n.Component),b={pairs:[],benchedPlayers:[]},y=function(e){Object(o.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={result:b},n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"handleSubmit",value:function(e,t){var a=Object(d.getPairings)(e,t);this.setState({result:a})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("p",null,"Welcome to Classic Tetris Gangs!")),r.a.createElement("div",{id:"page-body"},r.a.createElement(p,{submitFunction:this.handleSubmit}),this.state.result==b?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement(h,{result:this.state.result}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.f15a0e5b.chunk.js.map